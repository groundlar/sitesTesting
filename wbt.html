<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Web Bluetooth Testing</title>
</head>
<body>
<script>
function doWbt() {
    console.log('Requesting any Bluetooth Device...');
    return navigator.bluetooth.requestDevice({
        acceptAllDevices: true,
      })
    .then(device => {
      console.log('Attempting connection');
      return device.gatt.connect()
    })
    .then(server => {
      log('Getting Services...');
      return server.getPrimaryServices();
    })
    .then(service => {
      log('Getting Characteristics...');
      if (characteristicUuid) {
        // Get all characteristics that match this UUID.
        return service.getCharacteristics(characteristicUuid);
      }
    })
    .then(characteristics => {
      log('> Characteristics: ' +
        characteristics.map(c => c.uuid).join('\n' + ' '.repeat(19)));
    })
    .catch(error => {
      console.log('Argh! ' + error);
    });
  }
</script>

<button onclick="doWbt()"> Do WebBT</button>
</body>

